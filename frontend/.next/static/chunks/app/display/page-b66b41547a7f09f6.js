(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9703:function(e,t,n){Promise.resolve().then(n.bind(n,4192))},4192:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(7437),s=n(2265);function l(e){let{lyrics:t,zoomLevel:n}=e,[l,o]=(0,s.useState)([{id:"1",heightPercent:100}]),[i,a]=(0,s.useState)(null),c=(0,s.useRef)(null),d=e=>{if(l.length<=1)return;let t=l[e].heightPercent,n=l.filter((t,n)=>n!==e),r=t/n.length;o(n.map(e=>({...e,heightPercent:e.heightPercent+r})))},u=(0,s.useCallback)(e=>t=>{t.preventDefault(),a(e)},[]),h=(0,s.useCallback)(e=>{if(null===i||!c.current)return;let t=c.current.getBoundingClientRect(),n=(e.clientY-t.top)/t.height*100,r=0;for(let e=0;e<i;e++)r+=l[e].heightPercent;let s=Math.max(5,Math.min(n-r,100-(l.length-1)*5)),a=s-l[i].heightPercent,d=l[i+1].heightPercent-a;d<5||o(e=>e.map((e,t)=>t===i?{...e,heightPercent:s}:t===i+1?{...e,heightPercent:d}:e))},[i,l]),m=(0,s.useCallback)(()=>{a(null)},[]);(0,s.useEffect)(()=>{if(null!==i)return document.body.style.cursor="row-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",h),window.addEventListener("mouseup",m),()=>{document.body.style.cursor="",document.body.style.userSelect="",window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",m)}},[i,h,m]);let x=(0,s.useCallback)(e=>t=>{t.preventDefault(),a(e)},[]),g=(0,s.useCallback)(e=>{if(null===i||!c.current)return;let t=e.touches[0],n=c.current.getBoundingClientRect(),r=(t.clientY-n.top)/n.height*100,s=0;for(let e=0;e<i;e++)s+=l[e].heightPercent;let a=Math.max(5,Math.min(r-s,100-(l.length-1)*5)),d=a-l[i].heightPercent,u=l[i+1].heightPercent-d;u<5||o(e=>e.map((e,t)=>t===i?{...e,heightPercent:a}:t===i+1?{...e,heightPercent:u}:e))},[i,l]);(0,s.useEffect)(()=>{if(null!==i)return window.addEventListener("touchmove",g),window.addEventListener("touchend",m),()=>{window.removeEventListener("touchmove",g),window.removeEventListener("touchend",m)}},[i,g,m]);let v=()=>(0,r.jsx)("div",{className:"w-full max-w-4xl md:max-w-5xl lg:max-w-6xl xl:max-w-7xl mx-auto",style:{transform:"scale(".concat(n,")"),transformOrigin:"top center"},children:(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-center w-full text-lg sm:text-xl md:text-2xl lg:text-3xl xl:text-4xl 2xl:text-5xl leading-relaxed text-white",children:t})});return(0,r.jsxs)("div",{ref:c,className:"h-full w-full flex flex-col relative",children:[(0,r.jsxs)("div",{className:"absolute top-4 left-4 z-50 flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{let e=100/(l.length+1),t=l.map(t=>({...t,heightPercent:e}));t.push({id:Date.now().toString(),heightPercent:e}),o(t)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium  bg-white/10 hover:bg-white/20 text-white backdrop-blur-sm border border-white/20 transition-all duration-200",title:"Add split",children:[(0,r.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]}),l.length>1&&(0,r.jsxs)("button",{onClick:()=>d(l.length-1),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium  bg-white/10 hover:bg-red-500/30 text-white hover:text-red-300 backdrop-blur-sm border border-white/20 hover:border-red-500/50 transition-all duration-200",title:"Remove last split",children:[(0,r.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}),"Remove"]}),(0,r.jsxs)("span",{className:"text-xs text-white/50 ml-1",children:[l.length," ",1===l.length?"pane":"panes"]})]}),l.map((e,t)=>(0,r.jsxs)("div",{className:"contents",children:[(0,r.jsxs)("div",{className:"overflow-y-auto overflow-x-hidden relative group/pane",style:{height:"".concat(e.heightPercent,"%")},children:[(0,r.jsx)("div",{className:"p-4 sm:p-6 md:p-8 lg:p-12",children:v()}),l.length>1&&(0,r.jsx)("button",{onClick:()=>d(t),className:"absolute top-2 right-2 w-6 h-6 rounded-full  bg-red-500/0 hover:bg-red-500/30 text-red-400/0 hover:text-red-400 flex items-center justify-center transition-all duration-200 opacity-0 group-hover/pane:opacity-100",title:"Remove this pane",children:(0,r.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t<l.length-1&&(0,r.jsxs)("div",{className:"relative flex-shrink-0 cursor-row-resize group h-[3px] mx-4",onMouseDown:u(t),onTouchStart:x(t),children:[(0,r.jsx)("div",{className:"\n                  absolute inset-0 rounded-full overflow-hidden\n                  ".concat(i===t?"bg-gradient-to-r from-transparent via-amber-400 to-transparent":"bg-gradient-to-r from-transparent via-white/20 to-transparent group-hover:via-amber-400/60","\n                  transition-all duration-200\n                ")}),(0,r.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2  flex items-center justify-center pointer-events-none",children:(0,r.jsxs)("div",{className:"\n                    w-12 h-5 rounded-full flex items-center justify-center gap-0.5\n                    ".concat(i===t?"bg-amber-400/30":"bg-white/5 group-hover:bg-amber-400/20","\n                    transition-all duration-200 backdrop-blur-sm\n                  "),children:[(0,r.jsx)("div",{className:"w-4 h-0.5 rounded-full ".concat(i===t?"bg-amber-400":"bg-white/40 group-hover:bg-amber-400/80"," transition-colors")}),(0,r.jsx)("div",{className:"w-4 h-0.5 rounded-full ".concat(i===t?"bg-amber-400":"bg-white/40 group-hover:bg-amber-400/80"," transition-colors")})]})}),(0,r.jsx)("div",{className:"absolute -inset-y-2 inset-x-0"})]})]},e.id))]})}function o(){let[e,t]=(0,s.useState)(null),[n,o]=(0,s.useState)(1),[i,a]=(0,s.useState)(!0),c=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=()=>{a(!0),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{a(!1)},3e3)};return window.addEventListener("mousemove",e),window.addEventListener("keydown",e),window.addEventListener("touchstart",e),e(),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("keydown",e),window.removeEventListener("touchstart",e),c.current&&clearTimeout(c.current)}},[]),(0,s.useEffect)(()=>{let e=localStorage.getItem("lyrics-display-current");if(e)try{let n=JSON.parse(e);t(n)}catch(e){}},[]),(0,s.useEffect)(()=>{let e=e=>{("+"===e.key||"="===e.key)&&(e.preventDefault(),o(e=>Math.min(e+.1,2))),("-"===e.key||"_"===e.key)&&(e.preventDefault(),o(e=>Math.max(e-.1,.5))),"0"===e.key&&(e.preventDefault(),o(1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,s.useEffect)(()=>{let e=new BroadcastChannel("lyrics-display");return e.onmessage=e=>{let n=e.data;(null==n?void 0:n.type)==="song"&&n.song&&(t(n.song),localStorage.setItem("lyrics-display-current",JSON.stringify(n.song))),(null==n?void 0:n.type)==="clear"&&(t(null),localStorage.removeItem("lyrics-display-current")),(null==n?void 0:n.type)==="zoom"&&"number"==typeof n.zoomLevel&&o(n.zoomLevel)},()=>e.close()},[]),(0,r.jsxs)("div",{className:"h-screen w-screen bg-black text-white overflow-hidden relative",children:[(0,r.jsx)("div",{className:"\n          absolute top-4 right-4 z-50 flex items-center gap-2\n          transition-opacity duration-300\n          ".concat(i?"opacity-100":"opacity-0 pointer-events-none","\n        "),children:(0,r.jsxs)("div",{className:"flex items-center gap-1 bg-gray-800/80 backdrop-blur-sm rounded-lg px-2 py-1 border border-gray-600",children:[(0,r.jsx)("button",{onClick:()=>o(e=>Math.max(e-.1,.5)),className:"w-8 h-8 flex items-center justify-center text-white hover:bg-gray-700 rounded transition-colors",title:"Zoom Out (-)",children:"−"}),(0,r.jsxs)("span",{className:"text-sm text-gray-300 w-12 text-center",children:[Math.round(100*n),"%"]}),(0,r.jsx)("button",{onClick:()=>o(e=>Math.min(e+.1,2)),className:"w-8 h-8 flex items-center justify-center text-white hover:bg-gray-700 rounded transition-colors",title:"Zoom In (+)",children:"+"}),(0,r.jsx)("button",{onClick:()=>o(1),className:"text-xs text-gray-400 hover:text-white px-2 transition-colors",title:"Reset Zoom (0)",children:"Reset"})]})}),(0,r.jsxs)("div",{className:"\n          absolute bottom-4 right-4 z-50 \n          bg-gray-900/80 backdrop-blur-sm text-gray-400 text-xs px-3 py-2 rounded-lg\n          transition-opacity duration-300\n          ".concat(i?"opacity-100":"opacity-0","\n        "),children:[(0,r.jsx)("span",{className:"text-cyan-400",children:"+/-"})," Zoom •",(0,r.jsx)("span",{className:"text-gray-400",children:"0"})," Reset"]}),e?(0,r.jsx)(l,{lyrics:e.lyrics,zoomLevel:n}):(0,r.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-800 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})})}),(0,r.jsx)("p",{className:"text-gray-500 text-base sm:text-lg md:text-xl",children:"Waiting for song..."}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mt-2",children:"Select a song in the control window"})]})})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=9703)}),_N_E=e.O()}]);